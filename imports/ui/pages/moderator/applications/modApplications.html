<template name="modApplications">
    <div class="container-fluid">
        <div class="row">

            

            <div class="col-sm-12">
                {{#if isModerator}}
                <div class="card">
                    <div class="card-header">
                        Received applications
                    </div>
                    <div class="card-body">
                        <input type="text" class="form-control search" placeholder="Type to start searching...">
                        <br />
                        {{#if formProgress.count}}
                            <table class="table table-responsive-sm table-hover table-outline mb-0">
                                    <thead class="thead-light">
                                        <tr>
                                            <th>#</th>
                                            <th>Author</th>
                                            <th>Created</th>
                                            <th>Updated</th>
                                            <th>ELO</th>
                                            <th>Weight</th>
                                            <th>Weight Distribution</th>
                                            <th></th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {{#each formProgress}}
                                        <tr class="documents-index-item">
                                            <!-- Check for old entiries which doesn't kave form_id -->
                                            <td scope="row">{{#if form_id}} {{form_id}} {{else}} {{form_type_id}} {{/if}}</td>
                                            <td scope="row">{{author user_id}}</td>
                                            <td scope="row">{{formatDate created_at}}</td>
                                            <td scope="row">{{formatDate updated_at}}</td>
                                            <td scope="row">{{eloRanking}}</td>
                                            <td scope="row">{{applicationWeight}}</td>
                                            <td scope="row">
                                                {{chart}}
                                                <canvas id="{{form_type_id}}_chart" width="100" height="50"></canvas></td>
                                                
                                            <td scope="row">
                                                {{#if isInProgress status}}
                                                    <i title="In progress" class="icon-clock"></i>
                                                {{else}}
                                                    <span class="badge badge-success">completed</span>
                                                {{/if}}
                                            </td>
                                            <td scope="row">
                                                <a class="btn btn-sm btn-secondary" href="/moderator/application/{{form_type_id}}" role="button">View</a>
                                            </td>
                                        </tr>
                                        {{/each}}
                                    </tbody>
                                </table>
                            {{else}}
                                <div class="mt-3 text-center">
                                    <h2>No applications received</h2>
                                </div>
                            {{/if}}        
                        
                    </div>
                </div>
                {{else}}
                <h1>This page is for moderators only.</h1>
                {{/if}}
            </div>
        </div>
    </div>
</template>